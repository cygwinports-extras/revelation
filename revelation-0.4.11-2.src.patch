diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x ltmain.sh -x 'config.*' -x depcomp -x install-sh -x missing -x mkinstalldirs -x autom4te.cache -x '*compile' -x Makefile.in.in -x 'intltool*.in' -x 'xml-i18n-*.in' -x '*.pyc' -x '*.mo' -x '*.gmo' -x ABOUT-NLS -x Makevars.template -x COPYING -x INSTALL -x mdate-sh -x '*.orig' -x '*.rej' -x '*~' -x '*.temp' -x texinfo.tex -x ylwrap -x Makefile.in -x makefile.in -x configure -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x omf.make -x xmldocs.make -x config.py -x crack.c origsrc/revelation-0.4.11/acinclude.m4 src/revelation-0.4.11/acinclude.m4
--- origsrc/revelation-0.4.11/acinclude.m4	2006-07-22 10:22:44.000000000 -0500
+++ src/revelation-0.4.11/acinclude.m4	2007-01-17 23:07:13.765625000 -0600
@@ -83,7 +83,7 @@
 AC_DEFUN([RVL_PYGTK], [
 	PKG_CHECK_MODULES(PYGTK, [pygtk-2.0 >= 2.8.0])
 	PKG_CHECK_MODULES(GNOME_PYTHON, [gnome-python-2.0 >= 2.10.0])
-	PKG_CHECK_MODULES(GNOME_PYTHON_EXTRAS, [gnome-python-extras-2.0 >= 2.10.0])
+#	PKG_CHECK_MODULES(GNOME_PYTHON_EXTRAS, [gnome-python-extras-2.0 >= 2.10.0])
 
 	AC_PATH_PROG(PYGTK_CODEGEN, pygtk-codegen-2.0, no)
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x ltmain.sh -x 'config.*' -x depcomp -x install-sh -x missing -x mkinstalldirs -x autom4te.cache -x '*compile' -x Makefile.in.in -x 'intltool*.in' -x 'xml-i18n-*.in' -x '*.pyc' -x '*.mo' -x '*.gmo' -x ABOUT-NLS -x Makevars.template -x COPYING -x INSTALL -x mdate-sh -x '*.orig' -x '*.rej' -x '*~' -x '*.temp' -x texinfo.tex -x ylwrap -x Makefile.in -x makefile.in -x configure -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x omf.make -x xmldocs.make -x config.py -x crack.c origsrc/revelation-0.4.11/configure.ac src/revelation-0.4.11/configure.ac
--- origsrc/revelation-0.4.11/configure.ac	2007-01-16 04:39:13.000000000 -0600
+++ src/revelation-0.4.11/configure.ac	2007-01-17 23:07:13.765625000 -0600
@@ -12,6 +12,8 @@
 
 dnl check for dependencies
 AC_PROG_CC()
+AC_DISABLE_STATIC
+AC_PROG_LIBTOOL
 
 RVL_PYTHON_PATH(2.3)
 RVL_PYGTK()
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x ltmain.sh -x 'config.*' -x depcomp -x install-sh -x missing -x mkinstalldirs -x autom4te.cache -x '*compile' -x Makefile.in.in -x 'intltool*.in' -x 'xml-i18n-*.in' -x '*.pyc' -x '*.mo' -x '*.gmo' -x ABOUT-NLS -x Makevars.template -x COPYING -x INSTALL -x mdate-sh -x '*.orig' -x '*.rej' -x '*~' -x '*.temp' -x texinfo.tex -x ylwrap -x Makefile.in -x makefile.in -x configure -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x omf.make -x xmldocs.make -x config.py -x crack.c origsrc/revelation-0.4.11/data/bonobo/Makefile.am src/revelation-0.4.11/data/bonobo/Makefile.am
--- origsrc/revelation-0.4.11/data/bonobo/Makefile.am	2006-06-11 13:17:22.000000000 -0500
+++ src/revelation-0.4.11/data/bonobo/Makefile.am	2007-01-17 23:07:13.765625000 -0600
@@ -13,5 +13,5 @@
 GNOME_RevelationApplet.server: GNOME_RevelationApplet.server.in
 	sed \
 		-e "s|\@libexecdir\@|$(libexecdir)|" \
-		GNOME_RevelationApplet.server.in >GNOME_RevelationApplet.server
+		$< > $@
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x ltmain.sh -x 'config.*' -x depcomp -x install-sh -x missing -x mkinstalldirs -x autom4te.cache -x '*compile' -x Makefile.in.in -x 'intltool*.in' -x 'xml-i18n-*.in' -x '*.pyc' -x '*.mo' -x '*.gmo' -x ABOUT-NLS -x Makevars.template -x COPYING -x INSTALL -x mdate-sh -x '*.orig' -x '*.rej' -x '*~' -x '*.temp' -x texinfo.tex -x ylwrap -x Makefile.in -x makefile.in -x configure -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x omf.make -x xmldocs.make -x config.py -x crack.c origsrc/revelation-0.4.11/data/cracklib/Makefile.am src/revelation-0.4.11/data/cracklib/Makefile.am
--- origsrc/revelation-0.4.11/data/cracklib/Makefile.am	2006-06-11 13:17:22.000000000 -0500
+++ src/revelation-0.4.11/data/cracklib/Makefile.am	2007-01-17 23:07:13.765625000 -0600
@@ -12,5 +12,5 @@
 
 
 pwdict.hwm pwdict.pwd pwdict.pwi: pwdict
-	$(CRACK_FORMAT) pwdict | $(CRACK_PACKER) pwdict
+	$(CRACK_FORMAT) $< | $(CRACK_PACKER) pwdict
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x ltmain.sh -x 'config.*' -x depcomp -x install-sh -x missing -x mkinstalldirs -x autom4te.cache -x '*compile' -x Makefile.in.in -x 'intltool*.in' -x 'xml-i18n-*.in' -x '*.pyc' -x '*.mo' -x '*.gmo' -x ABOUT-NLS -x Makevars.template -x COPYING -x INSTALL -x mdate-sh -x '*.orig' -x '*.rej' -x '*~' -x '*.temp' -x texinfo.tex -x ylwrap -x Makefile.in -x makefile.in -x configure -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x omf.make -x xmldocs.make -x config.py -x crack.c origsrc/revelation-0.4.11/data/mime/Makefile.am src/revelation-0.4.11/data/mime/Makefile.am
--- origsrc/revelation-0.4.11/data/mime/Makefile.am	2007-01-10 19:22:35.000000000 -0600
+++ src/revelation-0.4.11/data/mime/Makefile.am	2007-01-17 23:07:13.765625000 -0600
@@ -18,7 +18,7 @@
 revelation.desktop: revelation.desktop.in
 	sed \
 		-e "s|\@VERSION\@|$(VERSION)|" \
-		revelation.desktop.in > revelation.desktop
+		$< > $@
 
 
 install-data-hook:
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x ltmain.sh -x 'config.*' -x depcomp -x install-sh -x missing -x mkinstalldirs -x autom4te.cache -x '*compile' -x Makefile.in.in -x 'intltool*.in' -x 'xml-i18n-*.in' -x '*.pyc' -x '*.mo' -x '*.gmo' -x ABOUT-NLS -x Makevars.template -x COPYING -x INSTALL -x mdate-sh -x '*.orig' -x '*.rej' -x '*~' -x '*.temp' -x texinfo.tex -x ylwrap -x Makefile.in -x makefile.in -x configure -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x omf.make -x xmldocs.make -x config.py -x crack.c origsrc/revelation-0.4.11/src/Makefile.am src/revelation-0.4.11/src/Makefile.am
--- origsrc/revelation-0.4.11/src/Makefile.am	2006-12-03 05:13:47.000000000 -0600
+++ src/revelation-0.4.11/src/Makefile.am	2007-01-17 23:07:13.781250000 -0600
@@ -15,11 +15,11 @@
 revelation: revelation.in
 	sed \
 		-e "s|\@pyexecdir\@|$(pyexecdir)|" \
-		revelation.in > revelation
+		$< > $@
 
 revelation-applet: revelation-applet.in
 	sed \
 		-e "s|\@pyexecdir\@|$(pyexecdir)|" \
 		-e "s|\@bindir\@|$(bindir)|" \
-		revelation-applet.in > revelation-applet
+		$< > $@
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x ltmain.sh -x 'config.*' -x depcomp -x install-sh -x missing -x mkinstalldirs -x autom4te.cache -x '*compile' -x Makefile.in.in -x 'intltool*.in' -x 'xml-i18n-*.in' -x '*.pyc' -x '*.mo' -x '*.gmo' -x ABOUT-NLS -x Makevars.template -x COPYING -x INSTALL -x mdate-sh -x '*.orig' -x '*.rej' -x '*~' -x '*.temp' -x texinfo.tex -x ylwrap -x Makefile.in -x makefile.in -x configure -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x omf.make -x xmldocs.make -x config.py -x crack.c origsrc/revelation-0.4.11/src/lib/Makefile.am src/revelation-0.4.11/src/lib/Makefile.am
--- origsrc/revelation-0.4.11/src/lib/Makefile.am	2007-01-01 11:21:11.000000000 -0600
+++ src/revelation-0.4.11/src/lib/Makefile.am	2007-01-17 23:07:13.812500000 -0600
@@ -30,5 +30,5 @@
 		-e "s|\@datadir\@|$(datadir)|" \
 		-e "s|\@pkgdatadir\@|$(pkgdatadir)|" \
 		-e "s|\@pkgschemadir\@|@GCONF_SCHEMA_FILE_DIR@|" \
-		config.py.in > config.py
+		$< > $@
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x ltmain.sh -x 'config.*' -x depcomp -x install-sh -x missing -x mkinstalldirs -x autom4te.cache -x '*compile' -x Makefile.in.in -x 'intltool*.in' -x 'xml-i18n-*.in' -x '*.pyc' -x '*.mo' -x '*.gmo' -x ABOUT-NLS -x Makevars.template -x COPYING -x INSTALL -x mdate-sh -x '*.orig' -x '*.rej' -x '*~' -x '*.temp' -x texinfo.tex -x ylwrap -x Makefile.in -x makefile.in -x configure -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x omf.make -x xmldocs.make -x config.py -x crack.c origsrc/revelation-0.4.11/src/wrap/crack/Makefile.am src/revelation-0.4.11/src/wrap/crack/Makefile.am
--- origsrc/revelation-0.4.11/src/wrap/crack/Makefile.am	2006-06-11 13:17:22.000000000 -0500
+++ src/revelation-0.4.11/src/wrap/crack/Makefile.am	2007-01-17 23:07:13.812500000 -0600
@@ -5,19 +5,18 @@
 # $Id: revelation-0.4.11-2.src.patch,v 1.1 2007-05-31 05:27:55 yselkowitz Exp $
 #
 
-module_PROGRAMS	= crack.so
-moduledir	= $(pyexecdir)/revelation
+moduledir = $(pyexecdir)/revelation
+module_LTLIBRARIES = crack.la
+
+nodist_crack_la_SOURCES = crack.c
+crack_la_CFLAGS = -fno-strict-aliasing -I${PYTHON_INCLUDE}
+crack_la_LDFLAGS = -module -avoid-version -no-undefined
+crack_la_LIBADD = -L/usr/lib/python$(PYTHON_VERSION)/config -lpython$(PYTHON_VERSION)
+
 CLEANFILES	= crack.c
 EXTRA_DIST	= crack.c.in
 
 crack.c: crack.c.in
 	sed \
 		-e "s|\@CRACK_DICTPATH\@|@CRACK_DICTPATH@|" \
-		crack.c.in >crack.c
-
-crack.o: crack.c
-	$(CC) -pthread -fno-strict-aliasing -fPIC -I${PYTHON_INCLUDE} -c crack.c -o crack.o
-
-crack.so: crack.o
-	$(CC) -Wl --export-dynamic -pthread -shared crack.o -lcrack -o crack.so
-
+		$< > $@
